<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
        "http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>
    <constant name="struts.ui.theme" value="simple"></constant>
    <package name="main" extends="json-default" namespace="/">
        <interceptors>
            <interceptor name="countTime" class="interceptor.TimeInterceptor"></interceptor>
            <interceptor-stack name="myStack"> <!-- 自定义拦截器栈-->
                <interceptor-ref name="defaultStack"></interceptor-ref>
                <interceptor-ref name="countTime"></interceptor-ref>
            </interceptor-stack>
        </interceptors>
        <!--<default-interceptor-ref name="myStack"></default-interceptor-ref> &lt;!&ndash; 规定默认拦截器栈 &ndash;&gt;-->
        <action name="login" class="action.LoginAction" method="execute">
            <result name="failed">/login.jsp</result>
            <result >/index.jsp</result>
        </action>
        <action name="register" class="action.RegisterAction" method="execute">
            <result name="success">/login.jsp</result>
            <result name="input">/index.jsp</result>
        </action>
        <action name="regPage" class="action.RegisterAction" method="regPage">
            <result>/register.jsp</result>
        </action>
        <action name="download" class="action.DownloadAction" method="execute">
            <result type="stream" name="success">
               <param name="inputName">inputStream</param>
               <param name="bufferSize">5*1024</param>
               <param name="contentDisposition">attachment;filename=${filename}</param>
            </result>
        </action>
        <action name="validcode" class="action.ValidCodeAction" method="execute">
            <result type="stream" name="success">
                <param name="inputName">inputStream</param>
                <param name="bufferSize">1024</param>
            </result>
        </action>
        <action name="checkcode" class="action.CheckCodeAction" method="execute">
            <result type="json" name="success">
                <param name="includeProperties">flag,mm</param>
            </result>
        </action>
        <action name="keyword" class="action.KeywordAction" method="execute">
            <result type="json" name="success">
                <!-- 不能直接写集合, 写集合中的元素 -->
                <param name="includeProperties">keywords.*</param> <!-- 如果不加此属性, 会将action所有的属性都返回-->
            </result>
        </action>
        <action name="jsonGet" class="action.JsonGetAction" method="execute">
            <result>/index.jsp</result>
        </action>
        <action name="jsonPost" class="action.JsonPostAction" method="execute">
            <result>/index.jsp</result>
        </action>

    </package>
    <package name="emp" extends="struts-default" namespace="/emp">
        <action name="empView" class="action.EmpViewAction" method="execute">
            <result name="success" type="dispatcher">/emp/empview.jsp</result>
        </action>
        <action name="empToAdd" class="action.EmpToAddAction" method="execute">
            <result name="success" type="dispatcher">/emp/empadd.jsp</result>
        </action>
        <action name="empAdd" class="action.EmpAddAction" method="execute">
            <result name="success" type="redirectAction">empView</result>
        </action>
        <action name="empBatchDel" class="action.EmpBatchDelAction" method="execute">
            <result name="success" type="redirectAction">empView</result>
        </action>
        <action name="empDel" class="action.EmpDelAction" method="execute">
            <result name="success" type="redirectAction">empView</result>
        </action>
        <action name="empToUpd" class="action.EmpToUpdAction" method="execute">
            <result name="success" type="dispatcher">/emp/empupdate.jsp</result>
        </action>
        <action name="empUpd" class="action.EmpUpdAction" method="execute">
            <result name="success" type="redirectAction">empView</result>
        </action>
    </package>
    <package name="test" extends="struts-default" namespace="/test">
        <action name="scope" class="action.ScopeAction" method="execute">
            <result name="success" type="dispatcher">/test.jsp</result>
        </action>
    </package>
</struts>
